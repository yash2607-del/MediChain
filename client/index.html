<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediChain</title>
  <!-- Favicon will be replaced at runtime by main.jsx if hashed asset path changes -->
  <link rel="icon" type="image/png" href="/src/assets/medichain-logo.png" />
  <style>
    /* Google Translate Widget Styling */
    /* Container for the custom translate control */
    #google_translate_element {
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 12px;
      background: transparent;
      padding: 0;
    }

    /* Landing page: keep language widget at top-right */
    #google_translate_element.gte-landing {
      position: fixed;
      top: 16px;
      right: 16px;
    }

    /* Inner pages: show language widget just below top nav bar */
    #google_translate_element.gte-inner {
      position: fixed;
      top: 72px; /* adjust if nav height changes */
      right: 16px;
    }

    /* Auth buttons next to language switcher */
    .top-auth-buttons {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .top-auth-btn {
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      border: none;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    }

    .top-auth-btn.login {
      background: white;
      color: #00A9FF;
      border: 2px solid #00A9FF;
    }

    .top-auth-btn.login:hover {
      background: #00A9FF;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 169, 255, 0.3);
    }

    .top-auth-btn.signup {
      background: linear-gradient(135deg, #00A9FF 0%, #89CFF3 100%);
      color: white;
      border: none;
    }

    .top-auth-btn.signup:hover {
      background: linear-gradient(135deg, #0098e6 0%, #78bce0 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 169, 255, 0.4);
    }

    /* Language icon button */
    #language-icon-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, #00A9FF 0%, #89CFF3 100%);
      box-shadow: 0 4px 12px rgba(0, 169, 255, 0.24);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      position: relative;
    }

    #language-icon-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(0, 169, 255, 0.32);
      background: linear-gradient(135deg, #0098e6 0%, #78bce0 100%);
    }

    #language-icon-btn svg {
      width: 24px;
      height: 24px;
      color: white;
    }

    /* Styled select that replaces the default Google UI */
    #custom-translate-select {
      position: absolute;
      top: 52px;
      right: 0;
      -webkit-appearance: none;
      appearance: none;
      padding: 8px;
      border-radius: 12px;
      border: 1px solid #DDE4EA;
      font-size: 14px;
      font-weight: 500;
      color: #0F172A;
      background: white;
      box-shadow: 0 8px 24px rgba(0, 169, 255, 0.15);
      cursor: pointer;
      min-width: 200px;
      max-height: 400px;
      overflow-y: auto;
      display: none;
      z-index: 10000;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      scrollbar-width: thin;
      scrollbar-color: #00A9FF #f0f0f0;
    }

    #custom-translate-select::-webkit-scrollbar {
      width: 6px;
    }

    #custom-translate-select::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 10px;
    }

    #custom-translate-select::-webkit-scrollbar-thumb {
      background: #00A9FF;
      border-radius: 10px;
    }

    #custom-translate-select::-webkit-scrollbar-thumb:hover {
      background: #0098e6;
    }

    #custom-translate-select.show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    #custom-translate-select:hover {
      border-color: #00A9FF;
      box-shadow: 0 10px 30px rgba(0, 169, 255, 0.25);
    }

    #custom-translate-select option {
      color: #0F172A;
      background: white;
      font-weight: 500;
      padding: 12px 16px;
      border-radius: 6px;
      margin: 4px;
      transition: all 0.2s ease;
      cursor: pointer;
      line-height: 1.5;
    }

    #custom-translate-select option:hover {
      background: linear-gradient(135deg, #CDF5FD 0%, #E8F8FF 100%);
      color: #00A9FF;
      transform: translateX(4px);
    }

    #custom-translate-select option:checked,
    #custom-translate-select option:focus {
      background: linear-gradient(135deg, #00A9FF 0%, #89CFF3 100%);
      color: white;
      font-weight: 600;
    }

    /* Hide Google Translate branding but keep dropdown visible */
    /* Hide Google default gadget (we use our own control) */
    .goog-te-gadget {
      display: none !important;
    }
    
    .goog-te-gadget > span > a {
      display: none !important;
    }
    
    .goog-te-gadget > span > span {
      display: none !important;
    }
    
    .goog-te-gadget .goog-te-combo {
      display: none !important;
    }

    /* Style the dropdown */
    .goog-te-combo {
      padding: 8px 36px 8px 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      color: white;
      background: rgba(255, 255, 255, 0.2);
      cursor: pointer;
      outline: none;
      transition: all 0.2s ease;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='white' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px center;
    }
    
    .goog-te-combo:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .goog-te-combo:focus {
      background: rgba(255, 255, 255, 0.35);
    }
    
    /* Style dropdown options */
    .goog-te-combo option {
      background: white;
      color: #333;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
      font-size: 14px;
      padding: 8px 12px;
      font-weight: 500;
    }

    /* Force body to stay at top (Google's script tries to push it down) */
    body {
      top: 0 !important;
      position: static !important;
    }

    /* Hide Google's top banner frame completely */
    .goog-te-banner-frame.skiptranslate {
      display: none !important;
    }
    
    body > .skiptranslate:first-child {
      display: none !important;
    }

    /* Hide Google tooltip/balloon */
    #goog-gt-tt,
    .goog-te-balloon-frame {
      display: none !important;
    }
    
    /* Prevent Google from adding top padding */
    body.translated-ltr {
      margin-top: 0 !important;
    }
  </style>
  </head>
  <body>
    <!-- React will render the language widget (and top auth buttons on landing) -->
    <div id="root"></div>

    <script>
      // Toggle language dropdown
      function toggleLanguageDropdown() {
        var sel = document.getElementById('custom-translate-select');
        if (sel) {
          var isShowing = sel.classList.contains('show');
          if (isShowing) {
            sel.classList.remove('show');
            sel.size = 1;
          } else {
            sel.classList.add('show');
            sel.focus();
            // Expand the select to show all options (limit to 8 for better UX)
            sel.size = Math.min(sel.options.length, 8);
          }
        }
      }

      function hideLanguageDropdown() {
        setTimeout(function() {
          var sel = document.getElementById('custom-translate-select');
          if (sel && document.activeElement !== sel) {
            sel.classList.remove('show');
            sel.size = 1;
          }
        }, 200);
      }

      // Helper to read cookies
      function _readCookie(name) {
        var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? decodeURIComponent(match[2]) : null;
      }

      // Sets the googtrans cookie to request Google Translate to apply a language
      function setGTranslate(lang) {
        // lang empty or 'en' means reset to original
        if (!lang || lang === 'en') {
          document.cookie = 'googtrans=;path=/';
          try { document.cookie = 'googtrans=;path=/;domain=.' + location.hostname; } catch(e){}
          location.reload();
          return;
        }
        var cookieVal = '/en/' + lang;
        document.cookie = 'googtrans=' + cookieVal + ';path=/';
        try { document.cookie = 'googtrans=' + cookieVal + ';path=/;domain=.' + location.hostname; } catch(e){}
        // reload so Google Translate script applies the cookie
        location.reload();
      }

      // On load: set select to current translation cookie if present
      (function(){
        var val = _readCookie('googtrans');
        if (val) {
          var parts = val.split('/');
          var lang = parts.length >= 3 ? parts[2] : '';
          var sel = document.getElementById('custom-translate-select');
          if (sel && lang) sel.value = lang;
        }
      })();

      function googleTranslateElementInit() {
        if (!window.google || !window.google.translate) return;
        var tryInit = function() {
          var el = document.getElementById('google_translate_element');
          if (!el) {
            setTimeout(tryInit, 200);
            return;
          }
          new window.google.translate.TranslateElement(
            {
              pageLanguage: 'en',
              includedLanguages: 'en,hi,bn,te,mr,ta,gu,kn,ml,pa,bho,as,mni-Mtei,lus,grt',
              layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
              autoDisplay: false,
              multilanguagePage: true
            },
            'google_translate_element'
          );
        };
        tryInit();
      }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async defer></script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
